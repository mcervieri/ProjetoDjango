{% extends "base.html" %} {% block title %}Usuários | FitApp{% endblock %} {%
block page_title %}Usuários{% endblock %} {% block content %}
<div class="card card-outline card-primary">
  <div
    class="card-header d-flex justify-content-between align-items-center flex-wrap"
  >
    <h3 class="card-title mb-0">Usuários cadastrados</h3>
    <form method="get" class="form-inline mt-2 mt-sm-0">
      <div class="input-group input-group-sm">
        <input
          type="text"
          name="q"
          value="{{ q }}"
          class="form-control"
          placeholder="Buscar por nome ou e-mail"
        />
        <span class="input-group-append">
          <button class="btn btn-primary" type="submit">Buscar</button>
        </span>
      </div>
    </form>
  </div>
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead>
          <tr>
            <th>Foto</th>
            <th>Usuário</th>
            <th>E-mail</th>
            <th>Função</th>
            <th class="text-right">Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for u in users %}
          <tr>
            <td class="align-middle">
              {% if u.profile.photo %}
              <img
                src="{{ u.profile.photo.url }}"
                class="img-circle"
                alt="Foto"
                style="width: 40px; height: 40px; object-fit: cover"
              />
              {% else %}
              <span class="badge badge-secondary">Sem foto</span>
              {% endif %}
            </td>
            <td class="align-middle">
              <a href="{% url 'profile:user_detail' u.pk %}"
                >{{ u.username }}</a
              >
            </td>
            <td class="align-middle">{{ u.email }}</td>
            <td class="align-middle">{{ u.profile.get_role_display }}</td>
            <td class="align-middle text-right">
              <a
                href="{% url 'profile:user_detail' u.pk %}"
                class="btn btn-sm btn-default mr-1"
                >Ver</a
              >
              <a
                href="{% url 'profile:confirm_delete' u.pk %}"
                class="btn btn-sm btn-danger"
                >Excluir</a
              >
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-center text-muted py-4">
              Nenhum usuário encontrado.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
